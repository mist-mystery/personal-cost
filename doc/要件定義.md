# 要件定義: 人件費調整ツール

## 目的

複数の役職・人数構成から、指定された目標金額に対し、各役職の日数配分を計算するクライアントサイドツールを提供する。

---

## 入力仕様

### ユーザー入力項目

| 項目名  | 型        | 説明                          |
| ---- | -------- | --------------------------- |
| 役職名  | `string` | 同一役職名が複数行に存在する場合は計算時にエラーとする |
| 人件費  | `number` | 1 人 1 日あたりの人件費（自然数）         |
| 人数   | `number` | 各役職の人数（自然数）                 |
| 目標金額 | `number` | 各役職の稼働による合計金額（自然数）          |

- 各役職は 1 行で表され、行の追加・削除は自由。
- 金額単位は「円」だが、UI 上で単位表示は行わない。

---

## バリデーション仕様

- 人件費・人数・目標金額はいずれも **自然数 (1 以上)**。
- 自然数でない（0, 負数, 小数, 未入力, 非数値）の場合は計算開始時にエラー。
- 役職名の重複は計算開始時にチェックし、重複があれば `solve_indefinite_equation` を実行せずエラー表示。
- 入力時は形式を問わず一旦すべて受け入れ、バリデーションは計算トリガー時に一括実行。

---

## 計算仕様

### 計算トリガー

- 「計算を開始する」ボタン押下時、`solve_indefinite_equation` 関数を呼び出す。

### `solve_indefinite_equation` 関数インターフェース

```ts
export type RoleCost = {
  role: string;
  cost: number; // 人件費 (円)
  count: number; // 人数
};

function solve_indefinite_equation(input: RoleCost[], targetAmount: number): [number, number[]][];
```

- 返り値は **[変動係数, 各解 (日数配列) ]の配列**。
- solve_indefinite_equation は深さ優先探索を行う。各解は配列の要素番号が小さいほうが値（日数）が小さくなるような日数配列のみ返す。

---

## 出力仕様

### 結果表示欄

- `solve_indefinite_equation` 実行結果が100件を超えたらページングする。見やすいレイアウトで表示する（例: テーブル or カード）。
- 解が 0 件の場合は結果表示欄に `"解が見つかりません"` と表示する。

### 丸め処理

- 本ツールの計算は自然数同士の **和・差・積のみ** で小数は発生しないため、丸め処理は不要とする。

---

## 非機能要件

- 全機能はブラウザのみで完結し、外部 API 通信は行わない。
- 計算実行は明示的なユーザー操作でのみ行い、自動再計算はしない。

